<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="expires" content="-1" />
    </head>
    <!-- <script data-main="scripts/main" src="js/require.js"></script> -->
    <script type="text/javascript" src="js/libs/knockout.js"></script>
    <script type="text/javascript" src="js/libs/tabletop.js"></script>
    <script type="module" src="js/main.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <body>
        <div id="loaderDiv" class="pageDiv" data-bind="visible: isLoading">
            <div class="loader"></div>
        </div> 

        <div class="modal" data-bind="visible: showModal, click: hideModal">
            <div class="modalContainer">
                <div data-bind="template: modalTemplate"></div>
            </div>
        </div>

        <div id="startDiv" class="pageDiv" data-bind="visible: isStartPhase">
            <h1>START PHASE</h1>
            Version - <span data-bind="text: version"></span>
            <div>
                Enter in the number of players, and select your class. One unique class per player. <br>
                The available classes listed below show class stat ratings, not the actual stat.
            </div>

            <div id="startDivContainer">
                How many players? <input data-bind="value: playersValue" />

                <div class="classesDiv" data-bind="foreach: classObjects">
                    <div class="classDiv" data-bind="click: function() { $parent.showClassSkillsModal($index); }">
                        <div class="className" data-bind="text: $data.className"></div>
                        <div class="classImage" data-bind="style: { backgroundImage: 'url(' + $data.classImage + ')'}"></div>
                        <div><span class="cTitle">Attack:</span><span data-bind="text: $data.attack, css: $parent.cValueCSS($data.attack)"></span></div>
                        <div><span class="cTitle">Defense:</span><span data-bind="text: $data.defense, css: $parent.cValueCSS($data.defense)"></span></div>
                        <div><span class="cTitle">HP:</span><span data-bind="text: $data.hp, css: $parent.cValueCSS($data.hp)"></span></div>
                        <div><span class="cTitle">AP:</span><span data-bind="text: $data.ap, css: $parent.cValueCSS($data.ap)"></span></div>
                        <div><span class="cTitle">Hand:</span><span data-bind="text: $data.hand, css: $parent.cValueCSS($data.hand)"></span></div>
                    </div>
                </div>

                <div class="startPDiv" data-bind="visible: playersValue() >= 1">
                    Player 1: <select data-bind="options: availableClasses, value: p1Class"></select>
                </div>
                <div class="startPDiv" data-bind="visible: playersValue() >= 2">
                    Player 2: <select data-bind="options: availableClasses, value: p2Class"></select>
                </div>
                <div class="startPDiv" data-bind="visible: playersValue() >= 3">
                    Player 3: <select data-bind="options: availableClasses, value: p3Class"></select>
                </div>
                <div class="startPDiv" data-bind="visible: playersValue() >= 4">
                    Player 4: <select data-bind="options: availableClasses, value: p4Class"></select>
                </div>
            </div>
            <button class="phaseButton" data-bind="click: onGuestMode">Guest Mode</button>
            <button class="phaseButton" data-bind="click: onSetupPhase">Confirm Classes</button>
        </div>

        <div id="setupDiv" class="pageDiv" data-bind="visible: isSetupPhase">
            <h1>SETUP PHASE</h1>
            <div>
                Construct your deck. <br>
                Please select 1 card from your tech deck. Then fill the rest with the basic cards. <br>
                Note your deck sizes are a minimum, so you can have more cards if you wish.
            </div>
            <div data-bind="foreach: players">
                <div class="setupContainer">
                    <h3>Player <span data-bind="text: $data.index"></span> - <span data-bind="text: $data.myClass"></span></h3>
                    <div>Deck size: <span data-bind="text: $data.minDeckSize"></span></div>
                    <div class="playerSetupDeck setupDeck">
                        <h4>Deck</h4>
                        <ul class="playerDeck" data-bind="foreach: $data.allSkills">
                            <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                            click: function(tech, ev) { $parent.removeSkill(tech, ev, $index) }"></li>
                        </ul>
                    </div>
                    <div class="techSetupDeck setupDeck">
                        <h4>Tech Deck</h4>
                        <ul class="techDeck" data-bind="foreach: $data.currentLevelTech">
                            <li class="techCard" data-bind="text: $data.description, 
                            click: $parent.learnTech"></li>
                        </ul>
                    </div>
                    <div class="shopSetupDeck setupDeck">
                        <h4>Basic cards</h4>
                        <ul class="shopDeck" data-bind="foreach: $parent.initialShopCards">
                            <li class="shopCard" data-bind="text: $data.description, 
                                click: function(tech, ev) { $parents[1].setupAddSkill(tech, ev, $index, $parent.index) }"></li>
                        </ul>
                    </div>
                </div>
            </div>

            <button class="phaseButton" data-bind="text: 'Confirm Decks', click: onTownPhase"></button>
        </div>

        <div id="playDiv" class="pageDiv" data-bind="visible: isPlayPhase">
            <div class="playerDiv" data-bind="style: playerDivMenu, click: playerDivMenuClick">
                <div class="playerLeft">
                    <div class="playerMenu">CONTROLS</div>
                </div>
                <div class="playerRight">
                    <div class="wdmDiv">
                        WORLD METER: <span data-bind="text: WDM"></span>
                        <button class="wdmButton" data-bind="text: '+', click: function() { addWDM(1); }"></button>
                        <button class="wdmButton" data-bind="text: '-', click: function() { addWDM(-1); }"></button>
                    </div>
                    <div class="adminContainer">
                        <div class="menuTitle">Admin</div>
                        <button class="aButton" data-bind="text: guestMode() ? 'HOST': 'GUEST',
                            click: toggleGuestMode">GUEST</button>
                    </div>
                    <div class="playerContainer" data-bind="foreach: players">
                        <div class="player">
                            <div class="menuTitle">Player <span data-bind="text: $data.index"></span> - <span data-bind="text: $data.myClass"></span></div>
                            <div class="playerLevel">Level:
                                <span class="playerValue" data-bind="text: $data.level"></span>
                                <button class="pDeltaButton" data-bind="text: '+', click: $data.levelUp"></button>
                                <button class="pDeltaButton" data-bind="text: '-', click: $data.levelDown"></button>
                            </div>
                            <!-- <div>Cur HP: <span data-bind="text: curHP"></span></span></div>
                            <div>Max HP: <span data-bind="text: $data.stats.hp"></span></div> -->
                            <div class="playerGold">Gold: 
                                <span class="playerValue" data-bind="text: $data.gold"></span>
                                <button class="pDeltaButton" data-bind="text: '+', click: function() {$data.addGold(1); }"></button>
                                <button class="pDeltaButton" data-bind="text: '-', click: function() {$data.addGold(-1); }"></button>
                            </div>
                            <div class="playerButtons">
                                <button data-bind="text: 'Stats', click: function() { $parent.showStatsModal($index) }">
                                <button data-bind="text: 'Deck', click: function() { $parent.showDeckModal($index) }">
                                <!-- <button class="pButton" data-bind="text: 'Items', click: function() { $parent.showItemModal($index) }"> -->
                                <button data-bind="text: 'Book', click: function() { $parent.showBookModal($index) }">
                                <button data-bind="text: 'Random', click: function() { $parent.showRandomLearnModal($index) }">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="townDiv" data-bind="visible: isTownPhase">
                <h1>TOWN PHASE</h1>

                <div class="innShop townShop">
                    <div class="shopTitle" data-bind="text: 'Inn'"></div>
                    <div class="shopSubtitle" data-bind="text: 'Hello traveler, would you like to rest up?'"></div>
                    <span><br/>Cost: </span><span data-bind="text: innCost"></span>
                    <div class="shopContainer">
                        <div class="innImage shopImage"></div>
                        <div class="shopOptions" data-bind="foreach: players">
                            <div class="sPlayerOption">
                                <div class="shopPlayer">Player <span data-bind="text: $data.index"></span></div>
                                <button class="shopButton" data-bind="text: 'Heal', click: $data.fullHeal"></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="marketShop townShop">
                    <div class="shopTitle" data-bind="text: 'Market'"></div>
                    <div class="shopSubtitle">
                        Welcome! See anything you like? <br/><br/>
                        Remove a skill - 5 Gold
                        <div><button class="shopButton" data-bind="click: replenishShop">Replenish Shop</button></div>
                    </div>
                    <div class="shopContainer">
                        <div class="innImage shopImage"></div>
                        <div class="shopOptions" data-bind="foreach: players">
                            <div class="sPlayerOption">
                                <div class="shopPlayer">Player <span data-bind="text: $data.index"></span></div>
                                <button class="shopButton" data-bind="text: 'Buy/Remove', 
                                    click: function() { $parent.showMarketModal($index); }"></button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="oracleShop townShop">
                    <div class="shopTitle" data-bind="text: 'Oracle'"></div>
                    <div class="shopSubtitle">
                        Greetings, I've been expecting you. <br/><br/>
                        Learn a new Skill - 3 Gold<br/>
                        Forget a skill - 3 Gold<br/>
                        Reroll skill - 2 Gold
                    </div>
                    <div class="shopContainer">
                        <div class="innImage shopImage"></div>
                        <div class="shopOptions" data-bind="foreach: players">
                            <div class="sPlayerOption">
                                <div class="shopPlayer">Player <span data-bind="text: $data.index"></span></div>
                                <button class="shopButton" data-bind="text: 'Learn/Forget', 
                                    click: function() { $parent.showSkillChangeModal($index); }"></button>
                                <button class="shopButton" data-bind="text: 'Random skill', 
                                    click: function() { $parent.showSkillRandomModal($index); }"></button>
                            </div>
                        </div>
                    </div>
                </div> -->
                <!-- <div class="blacksmithShop townShop">
                    <div class="shopTitle" data-bind="text: 'Blacksmith'"></div>
                    <div class="shopSubtitle" data-bind="text: 'Welcome traveler! Spend the night here to replenish your health. '"></div>
                    <div class="shopContainer">
                        <div class="innImage shopImage"></div>
                        <div class="shopOptions" data-bind="foreach: players">
                            <div class="sPlayerOption">
                                <div class="shopPlayer">Player <span data-bind="text: $data.index"></span></div>
                                <button class="shopButton" data-bind="text: 'Heal'"></button>
                            </div>
                        </div>
                    </div>
                </div> -->

                <button class="phaseButton" data-bind="text: 'Dungeon Adventure', click: onWorldPhase"></button>
            </div>
            
            <div id="worldDiv" data-bind="visible: isWorldPhase, with: overworld">
                <h1>OVERWORLD</h1>
                <div>
                    Please select a dungeon to embark to.
                </div>
                <div data-bind="foreach: dungeons">
                    <div class="worldDungeonDiv bossCard" data-bind="click: function() { $parents[1].onDungeonClick($index); }">
                        <div class="bossStatsContainer">
                            <div class="bossName" data-bind="text: $data.boss.name"></div>
                            <div class="bossPic"></div>
                            <div class="bossHP">HP: <span data-bind="text: $data.boss.hp"></span></div>
                            <div class="bossHP">Attack: <span data-bind="text: $data.boss.attack"></span></div>
                            <div class="bossHP">Defense: <span data-bind="text: $data.boss.defense"></span></div>
                            <!-- <div data-bind="foreach: $data.deck">
                                <div data-bind="text: $data.name"></div>
                            </div> -->
                        </div><!--
                        --><div class="bossSkillsContainer">
                            <ul class="bossSkills" data-bind="foreach: $data.boss.skills">
                                <li class="bossSkillLine" data-bind="text: $data"></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button class="phaseButton" data-bind="text: 'Return to Town', click: $parent.onTownPhase"></button>
            </div>

            <div id="dungeonDiv" data-bind="visible: isDungeonPhase, with: dungeon">
                <h1>DUNGEON PHASE - <span data-bind="text: $data.boss.name"></span></h1>
                <div class="dungeonDeckContainer">
                    <div class="dungeonDeck">
                        <div class="dungeonDeckBlock" data-bind="click: $data.drawDungeon">
                            <span class="dungeonDeckRemaining" data-bind="text: $data.deck().length"></span>
                        </div>
                        <button data-bind="text: 'undo', click: $data.undrawDungeon"></button>
                        <div class="dungeonDice" data-bind="click: $data.rollDice">
                            <div class="dungeonDiceTitle">ROLL DICE</div>
                            <span class="dungeonDiceValue" data-bind="text: $data.diceValue"></span>
                        </div>
                    </div>
                    <div class="dungeonPlayed" data-bind="foreach: $data.discard">
                        <!--ko if: $data.isActivityCard-->
                        <div class="dungeonPlayedCard dungeonActivity">
                            <div data-bind="text: $data.name"></div>
                            <div class="dungeonPlayedStatInfo">
                                <div data-bind="text: $data.effect"></div>
                            </div>
                        </div>
                        <!-- /ko -->
                        <!--ko if: $data.isMonsterCard-->
                        <div class="dungeonPlayedCard dungeonMonster">
                            <div class="dungeonPlayLeft">
                                <div data-bind="text: $data.name"></div>
                                <div class="dungeonPlayedStatInfo">
                                    <div><span class="dungeonTitle">Level:</span> <span class="dungeonStat" data-bind="text: $data.level"></span></div>
                                    <div><span class="dungeonTitle">CurHP:</span> <span class="dungeonStat" data-bind="text: $data.activeCurHp"></span>
                                        <button class="monsterHPButton" data-bind="text: '+', click: function() { statUpdate('curHP', 1); }"></button>
                                        <button class="monsterHPButton" data-bind="text: '-', click: function() { statUpdate('curHP', -1); }"></button>
                                    </div>
                                    <div><span class="dungeonTitle">MaxHP:</span> <span class="dungeonStat" data-bind="text: $data.activeMaxHp"></span></div>
                                    <div><span class="dungeonTitle">Attack:</span> <span class="dungeonStat" data-bind="text: $data.activeAttack"></span>
                                        <button class="monsterHPButton" data-bind="text: '+', click: function() { statUpdate('attack', 1); }"></button>
                                        <button class="monsterHPButton" data-bind="text: '-', click: function() { statUpdate('attack', -1); }"></button>
                                    </div>
                                    <div><span class="dungeonTitle">Defense:</span> <span class="dungeonStat" data-bind="text: $data.activeDefense"></span>
                                        <button class="monsterHPButton" data-bind="text: '+', click: function() { statUpdate('defense', 1); }"></button>
                                        <button class="monsterHPButton" data-bind="text: '-', click: function() { statUpdate('defense', -1); }"></button>
                                    </div>
                                </div>
                            </div>
                            <div class="dungeonPlayRight">
                                <ul class="monsterSkills" data-bind="foreach: $data.skills">
                                    <li class="monsterSkillsLine" data-bind="text: $data"></li>
                                </ul>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
                <div class="playersSection" data-bind="visible: $parent.dungeonPlayerSectionVisible()">
                    <div class="playersContainer">
                        <div data-bind="foreach: $data.players">
                            <div class="playerContainer">
                                <div class="playerTitle" data-bind="css: { selectedPlayerContainer: $parent.selectedPlayerCss($index)}">
                                    <span data-bind="text: $data.index"></span>
                                </div>
                                <!-- <ul class="playerPlayedCards" data-bind="foreach: $data.playedCards">
                                    <li data-bind="text: $data.name"></li>
                                </ul> -->
                            </div>
                        </div>
                    </div><!--
                    --><div class="activePlayerContainer" data-bind="with: $data.activePlayer">
                        <div class="activePlayer">
                            <div class="activePlayerTitle">Player: <span data-bind="text: $data.index"></span></div>
                            <div class="statsContainer">
                                <div class="statsImage" data-bind="style: { backgroundImage: 'url(' + classImage + ')'}"></div>
                                <div class="statsStats">
                                    <div>CurHP: <span data-bind="text: curHP"></span>
                                        <button class="wdmButton" data-bind="text: '+', click: function() { heal(1); }"></button>
                                        <button class="wdmButton" data-bind="text: '-', click: function() { heal(-1); }"></button>
                                    </div>
                                    <div data-bind="with: stats">
                                        <div>MaxHP: <span data-bind="text: hp"></span></div>
                                        <div>ATK: <span class="sStatValue" data-bind="text: attack"></span></div>
                                        <div>DEF: <span class="sStatValue" data-bind="text: defense"></span></div>
                                        <div>AP: <span class="sStatValue" data-bind="text: ap"></span></div>
                                        <div>HAND: <span class="sStatValue" data-bind="text: hand"></span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="playerPlayContainer">
                            <div class="playTopContainer">
                                <button class="playTopButton" data-bind="click: $data.cleanUp">Clean up</button>
                                <button class="playTopButton" data-bind="click: $data.drawHand">Draw hand</button>
                                <button class="playTopButton" data-bind="click: $parent.nextPlayer">End turn</button>
                            </div>
                            <div class="playLeftContainer">
                                <div class="playerDiscard playerSection">
                                    <div id="discardOverlay" class="playSectionOverlay" data-bind="click: $parents[1].sendCardEnd, visible: $parents[1].sendingCard"></div>
                                    <div id="discardSection" class="playerSectionContent">
                                        <div class="playSectionTitle">DISCARD</div>
                                        <div class="playerDiscardBlock" data-bind="click: $parents[1].showSearchCardModal">
                                            <span data-bind="text: $data.activeDiscard().length"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="playerDeck playerSection">
                                    <div id="deckOverlay" class="playSectionOverlay" data-bind="click: $parents[1].sendCardEnd, visible: $parents[1].sendingCard"></div>
                                    <div id="deckSection" class="playerSectionContent">
                                        <div class="playSectionTitle">DECK</div>
                                        <div class="playerDeckBlock" data-bind="click: $parents[1].showSearchCardModal">
                                            <span data-bind="text: $data.activeDeck().length"></span>
                                        </div>
                                        <div class="playerDeckButtons">
                                            <button data-bind="click: $data.drawCard">Draw</button>
                                            <button data-bind="click: $data.shuffleActiveDeck">Shuffle</button>
                                            <button data-bind="click: $data.replenishDeck">Replenish</button>
                                        </div>
                                    </div>
                                </div>
                            </div><!--
                            --><div class="playRightContainer">
                                <div class="playerPlay playerSection">
                                    <div id="playOverlay" class="playSectionOverlay" data-bind="click: $parents[1].sendCardEnd, visible: $parents[1].sendingCard"></div>
                                    <div id="playSection" class="playerSectionContent">
                                        <div class="playSectionTitle">PLAY</div>
                                        <div data-bind="template: { name: 'tinyCardTemplate', data: { 
                                            deck: $data.activePlay,
                                            section: 'play',
                                            cardClick: $parents[1].sendCardStart
                                        } }"></div>
                                    </div>
                                </div>
                                <div class="playerHand playerSection">
                                    <div id="handOverlay" class="playSectionOverlay" data-bind="click: $parents[1].sendCardEnd, visible: $parents[1].sendingCard"></div>
                                    <div id="handSection" class="playerSectionContent">
                                        <div class="playSectionTitle">HAND</div>
                                        <div data-bind="template: { name: 'tinyCardTemplate', data: { 
                                            deck: $data.activeHand,
                                            section: 'hand',
                                            cardClick: $parents[1].sendCardStart
                                        } }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dungeonPlayContainer" data-bind="visible: !$parent.dungeonPlayerSectionVisible()">
                    <div class="dungeonPlaySearch setupDeck">
                        Search: <input data-bind="value: $parent.dungeonSearch">
                        <ul data-bind="foreach: $parent.dungeonSearchResults">
                            <li data-bind="text: $data.name, click: $parent.addDungeonActives"></li>
                        </ul>
                    </div>
                    <div class="dungeonPlayActives" data-bind="foreach: dungeonActives">
                        <div class="dungeonActiveCard">
                            <div data-bind="template: { name: 'cardTemplate', data: $data }"></div>
                            <div class="activeTurn" data-bind="text: 'Active ' + $data.activeTurn()"></div>
                            <button data-bind="click: function(c, e) { 
                                e.stopPropagation(); 
                                $data.activeTurnUpdate(1); 
                                }">+</button>
                            <button data-bind="click: function(c, e) { 
                                e.stopPropagation(); 
                                $data.activeTurnUpdate(-1); 
                                }">-</button>
                        </div>
                    </div>
                </div>
                
                <button class="phaseButton" data-bind="text: 'Return to Town', click: $parent.onTownPhase"></button>
            </div>
        </div>
    </body>

    <script id="emptyTemplate" type="text/html"></script>

    <script id="statsModal" type="text/html">
        <div class="modalDiv statsModalDiv">
            <div class="statsLeftContainer">
                <div class="statsTitle">
                    <div class="sPlayer">Player <span data-bind="text: index"></span></div>
                    <div class="sClass" data-bind="text: myClass"></div>
                    <div class="sLevel">Lvl. <span data-bind="text: level"></span></div>
                </div>
                <div class="statsHPBar">
                    <progress class="sHPBar" data-bind="attr: {value: curHP, max: stats().hp}"></progress>
                    <div class="sHPText">
                        <span data-bind="text: curHP"></span>/<span data-bind="text: stats().hp"> HP</span>
                    </div>
                </div>
                <div class="statsImage" data-bind="style: { backgroundImage: 'url(' + classImage + ')'}"></div>
                <div class="statsStats" data-bind="with: stats">
                    <div class="sStat">
                        <span class="sStatLabel">Attack:</span>
                        <span class="sStatValue" data-bind="text: attack"></span></div>
                    <div class="sStat">
                        <span class="sStatLabel">Defense:</span>
                        <span class="sStatValue" data-bind="text: defense"></span></div>
                    <div class="sStat">
                        <span class="sStatLabel">HP:</span>
                        <span class="sStatValue" data-bind="text: hp"></span></div>
                    <div class="sStat">
                        <span class="sStatLabel">AP:</span>
                        <span class="sStatValue" data-bind="text: ap"></span></div>
                    <div class="sStat">
                        <span class="sStatLabel">Hand:</span>
                        <span class="sStatValue" data-bind="text: hand"></span></div>
                </div>
            </div>
            <div class="statsRightContainer">
                <div class="statsPassives">
                    <div class="statsPassiveTitle">Passives</div>
                    <div class="statsPassive" data-bind="foreach: passives">
                        <div class="passiveName" data-bind="text: $data.name"></div>
                        <div class="passiveDescript" data-bind="text: $data.effect"></div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script id="cardTemplate" type="text/html">
        <div class="deckCard" data-bind="css: $data.myClass.toLowerCase(), click: $parent.cardClick">
            <div class="cardTitle">
                <div class="cardName" data-bind="text: $data.name"></div>
                <div class="cardCostContainer">
                    <div class="cardCost" data-bind="text: $data.cost"></div>
                </div>
            </div>
            <div class="cardImage" data-bind="style: { backgroundImage: 'url(' + $data.skillImage() + ')'}"></div>
            <div class="cardSubtitle">
                <span class="cardClass" data-bind="text: $data.myClass"></span>
                <span class="cardLevel" data-bind="text: 'Lv ' + $data.level"></span> - 
                <span class="cardType" data-bind="text: $data.type"></span>
            </div>
            <div class="cardEffect" data-bind="text: $data.effect"></div>
        </div>
    </script>

    <script id="deckModal" type="text/html">
        <div class="modalDiv deckModalDiv">
            Search: <input class="deckSearch" data-bind="value: $parent.deckSearchValue">
            <div data-bind="foreach: deck">
                <div class="deckModalCard" data-bind="click: $parent.cardClick, 
                template: { name: 'cardTemplate', data: $data }"></div>
            </div>
        </div>
    </script>

    <script id="marketModal" type="text/html">
        <div class="modalDiv transModalDiv">
            <div class="transDescription">
                Total: <span data-bind="text: transactionTotal"></span>
            </div>
            <div class="transDiv">
                <h4>Shop</h4>
                <div data-bind="foreach: availShopCards">
                    <div class="deckModalCard" data-bind="click: $parent.buySkill, 
                    template: { name: 'cardTemplate', data: $data }"></div>
                </div>
                <!-- <ul class="shopDeck" data-bind="foreach: availShopCards">
                    <li class="shopCard" data-bind="text: $data.shopDescription, 
                    click: $parent.buySkill"></li>
                </ul> -->
            </div>
            <div class="tradeDiv">
                <div class="setupDeck">
                    <h4>Buy</h4>
                    <div>
                        Cost: <span data-bind="text: buyDeckCost"></span>
                    </div>
                    <ul class="buyDeck" data-bind="foreach: buyDeck">
                        <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                        click: $parent.unbuySkill"></li>
                    </ul>
                </div>
                <div class="setupDeck">
                    <h4>Remove</h4>
                    <div>
                        Cost: <span data-bind="text: sellDeckCost"></span>
                    </div>
                    <ul class="sellDeck" data-bind="foreach: sellDeck">
                        <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                        click: $parent.unsellSkill"></li>
                    </ul>
                </div>
            </div>
            <div class="marketDiv setupDeck">
                <h4>Deck</h4>
                <ul class="playerDeck" data-bind="foreach: playerDeck">
                    <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                    click: $parent.sellSkill"></li>
                </ul>
            </div>
            <button class="phaseButton confirmTransaction" data-bind="text: 'Confirm', 
                click: $parent.confirmMarketTransaction"></button>
        </div>
    </script>

    <script id="oracleModal" type="text/html">
        <div class="modalDiv transModalDiv">
            <div class="transDescription">
                Total: <span data-bind="text: transactionTotal"></span>
            </div>
            <div class="transDiv setupDeck">
                <h4>Tech Skills</h4>
                <ul class="shopDeck" data-bind="foreach: availTechCards">
                    <li class="shopCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                    click: $parent.buySkill"></li>
                </ul>
            </div>
            <div class="tradeDiv">
                <div class="setupDeck">
                    <h4>Learn</h4>
                    <div>
                        Cost: <span data-bind="text: buyDeckCost"></span>
                    </div>
                    <ul class="buyDeck" data-bind="foreach: buyDeck">
                        <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                        click: $parent.unbuySkill"></li>
                    </ul>
                </div>
                <div class="setupDeck">
                    <h4>Forget</h4>
                    <div>
                        Cost: <span data-bind="text: sellDeckCost"></span>
                    </div>
                    <ul class="sellDeck" data-bind="foreach: sellDeck">
                        <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                        click: $parent.unsellSkill"></li>
                    </ul>
                </div>
            </div>
            <div class="transDiv setupDeck">
                <h4>Deck</h4>
                <ul class="playerDeck" data-bind="foreach: playerTechCards">
                    <li class="playerCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                        click: $parent.sellSkill"></li>
                </ul>
            </div>
            <button class="phaseButton confirmTransaction" data-bind="text: 'Confirm', 
                click: $parent.confirmOracleTransaction"></button>
        </div>
    </script>

    <script id="oracleRandomModal" type="text/html">
        <div class="modalDiv transModalDiv">
            <div class="transDescription">
                Forget a skill to learn a new random skill!
            </div>
            <div class="transDiv setupDeck">
                <h4>Tech Deck</h4>
                <ul class="shopDeck" data-bind="foreach: availTechCards">
                    <li class="shopCard" data-bind="attr: {title: $data.description}, text: $data.name"></li>
                </ul>
            </div>
            <div class="transDiv setupDeck">
                <h4>Forget</h4>
                <ul class="shopDeck" data-bind="foreach: sellDeck">
                    <li class="shopCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                    click: $parent.unsellSkill"></li>
                </ul>
            </div>
            <div class="transDiv setupDeck">
                <h4>Learned Skills</h4>
                <ul class="shopDeck" data-bind="foreach: playerTechCards">
                    <li class="shopCard" data-bind="attr: {title: $data.description}, text: $data.name, 
                    click: $parent.sellSkill"></li>
                </ul>
            </div>
            <button class="phaseButton confirmTransaction" data-bind="text: 'Learn random skill', 
                click: $parent.confirmOracleRandomTransaction"></button>
        </div>
    </script>

    <script id="tinyCardTemplate" type="text/html">
        <div data-bind="foreach: deck">
            <div class="playerCardContainer" data-bind="attr: {title: $data.description}">
                <div class="playerCard" data-bind="click: function(ethis, ev) { $parent.cardClick(ethis, ev, $parent.section) }">
                    <span class="cardName" data-bind="text: $data.name"></span>
                    <span class="cardCost" data-bind="text: $data.cost + ' AP'"></span>
                    <div class="cardEffect" data-bind="text: $data.effect"></div>
                </div>
            </div>
        </div>
    </script>
</html>


